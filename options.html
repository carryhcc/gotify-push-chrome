<!DOCTYPE html>
<html lang="en"> <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="optionsTitle">Gotify Push Tool - Settings</title>
  <style>
    :root {
      --color-primary: #007aff; /* 主题蓝色 */
      --color-primary-dark: #005bb5;
      --color-success: #34c759;
      --color-danger: #ff3b30;
      --color-danger-dark: #c62828;
      --color-bg-light: #f5f5f7;
      --color-bg-card: #ffffff;
      --color-text: #333;
      --color-text-secondary: #666;
      --color-border: #e0e0e0;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.12);
      --shadow-md: 0 3px 6px rgba(0,0,0,0.10), 0 3px 6px rgba(0,0,0,0.15);
      --border-radius-md: 8px;
      --border-radius-sm: 5px;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      margin: 0 auto;
      padding: 24px;
      max-width: 720px;
      background-color: var(--color-bg-light);
      color: var(--color-text);
      font-size: 15px;
    }
    
    /* 头部布局 */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    h1 {
      color: var(--color-text);
      font-size: 26px;
      font-weight: 600;
      margin: 0;
    }
    
    /* 语言切换器样式 - 移至右上角 */
    .lang-switcher-group {
      display: flex !important;
      align-items: center !important;
      gap: 8px !important;
      flex-direction: row !important;
      flex-wrap: nowrap;
    }
    
    .lang-switcher-group label {
      margin-bottom: 0 !important;
      font-size: 14px;
      color: var(--color-text-secondary);
      font-weight: 500;
      white-space: nowrap !important;
      display: inline-block !important;
    }
    
    .lang-switcher-group select {
      max-width: 150px;
      padding: 8px 12px;
      border: 1px solid var(--color-border);
      border-radius: var(--border-radius-sm);
      font-size: 14px;
      background-color: var(--color-bg-card);
      display: inline-block !important;
    }
    
    /* 确保header中的元素都横向排列 */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    /* 配置卡片样式 */
    .config-card {
      margin-bottom: 25px;
      background-color: var(--color-bg-card);
      padding: 24px;
      border-radius: var(--border-radius-md);
      box-shadow: var(--shadow-sm);
    }
    
    .config-card h2 {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 20px 0;
      color: var(--color-text);
      border-bottom: 1px solid var(--color-border);
      padding-bottom: 10px;
    }
    
    label {
      display: block;
      margin-bottom: 10px;
      font-weight: 500;
      color: var(--color-text-secondary);
      font-size: 14px;
    }
    
    input[type="text"],
    input[type="url"],
    select {
      width: 100%;
      padding: 12px;
      border: 1px solid var(--color-border);
      border-radius: var(--border-radius-sm);
      font-size: 15px;
      box-sizing: border-box;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    input[type="text"]:focus,
    input[type="url"]:focus,
    select:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(0,122,255,0.2);
    }
    
    /* 辅助说明文本 */
    small {
      display: block;
      font-size: 13px;
      color: var(--color-text-secondary);
      margin-top: 8px;
    }
    
    /* --- 开关样式 --- */
    .toggle-switch-group {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }
    
    .toggle-switch-group label {
      margin-bottom: 0;
      font-weight: 500;
      color: var(--color-text); /* 标签文本加粗 */
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 28px;
    }
    
    .switch input { 
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 28px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: var(--color-success);
    }
    
    input:checked + .slider:before {
      transform: translateX(22px);
    }
    /* --- 开关样式结束 --- */
    
    /* 配置项间距 */
    .config-item {
      margin-bottom: 20px;
    }
    
    .config-item:last-child {
      margin-bottom: 0;
    }
    
    /* 水平排列配置项 */
    .flex-row {
      display: flex;
      align-items: flex-end;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .flex-item {
      flex: 1;
      min-width: 200px;
    }
    
    .toggle-item {
      flex: 0 0 auto;
      white-space: nowrap;
    }
    
    .priority-item {
      flex: 1;
    }
    
    /* 调整右键推送优先级下拉框的宽度 */
    .priority-item select {
      width: 180px;
      max-width: 100%;
    }
    
    /* Token 列表样式 */
    #tokenListHeader {
      display: flex;
      margin-bottom: 10px;
      font-size: 13px;
      font-weight: 500;
      color: var(--color-text-secondary);
      padding: 0 5px;
    }
    
    #tokenListHeader .remark-header { flex: 1; }
    #tokenListHeader .token-header { flex: 2; }
    #tokenListHeader .action-header { width: 65px; text-align: center; }
    
    .token-item {
      display: flex;
      margin-bottom: 10px;
      align-items: center;
      gap: 10px;
    }
    
    .token-item .remark-input { flex: 1; }
    .token-item .token-input { flex: 2; }
    .token-item input { width: auto; }
    
    .btn { /* 统一样式 */
      border: none;
      padding: 10px 16px;
      border-radius: var(--border-radius-sm);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.2s, box-shadow 0.2s;
      text-align: center;
    }
    
    .delete-btn {
      background-color: var(--color-danger);
      color: white;
      width: 65px; /* 固定宽度 */
    }
    
    .delete-btn:hover { background-color: var(--color-danger-dark); }
    
    .add-btn {
      background-color: var(--color-success);
      color: white;
      margin-top: 10px;
      width: 100%;
    }
    
    .add-btn:hover { background-color: #2da84a; }
    
    .save-btn {
      background-color: var(--color-primary);
      color: white;
      padding: 14px 28px;
      font-size: 16px;
      margin-top: 20px;
      width: 100%;
      box-shadow: var(--shadow-sm);
    }
    
    .save-btn:hover {
      background-color: var(--color-primary-dark);
      box-shadow: var(--shadow-md);
    }
    
    .status {
      margin-top: 20px;
      padding: 12px;
      border-radius: var(--border-radius-sm);
      display: none;
      text-align: center;
      font-weight: 500;
    }
    
    .success {
      background-color: #e6f7eb;
      color: #228b22;
      display: block;
    }
    
    /* 响应式设计 */
    @media (max-width: 600px) {
      .header {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }
      
      /* 确保在小屏幕上语言选择器内的元素仍然横向排列 */
      .header .lang-switcher-group {
        flex-direction: row !important;
        justify-content: center;
      }
      
      .config-card {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1 data-i18n="optionsTitle">Gotify推送工具配置</h1>
    
    <!-- 语言切换器移至右上角 -->
    <div class="lang-switcher-group">
      <label for="langSwitcher" data-i18n="langLabel">语言:</label>
      <select id="langSwitcher">
        <option value="en">English</option>
        <option value="zh_CN">简体中文</option>
      </select>
    </div>
  </div>

  <!-- 右键菜单配置卡片 -->
  <div class="config-card">
    <h2 data-i18n="contextMenuConfigTitle">右键菜单配置</h2>
    
    <div class="config-item flex-row">
      <div class="flex-item toggle-item">
        <div class="toggle-switch-group">
          <label for="contextMenuEnabled" data-i18n="contextMenuLabel">开启右键发送</label>
          <label class="switch">
            <input type="checkbox" id="contextMenuEnabled">
            <span class="slider"></span>
          </label>
        </div>
      </div>
      
      <div class="flex-item priority-item">
        <label for="contextMenuPriority" data-i18n="contextMenuPriorityLabel">右键推送优先级:</label>
        <select id="contextMenuPriority">
          <option value="0" data-i18n="priorityOption0">0 (最低)</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5" selected data-i18n="priorityOption5">5 (默认)</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10" data-i18n="priorityOption10">10 (最高)</option>
        </select>
      </div>
    </div>
  </div>

  <!-- 服务器配置卡片 -->
  <div class="config-card">
    <h2 data-i18n="serverConfigTitle">服务器配置</h2>
    
    <div class="config-item">
      <label for="gotifyUrl" data-i18n="serverAddressLabel">Gotify服务器地址:</label>
      <input type="url" id="gotifyUrl" data-i18n-placeholder="serverAddressPlaceholder" placeholder="http://127.0.0.1:8080">
    </div>
    
    <div class="config-item">
      <label data-i18n="tokenListLabel">Gotify Token列表:</label>
      <div id="tokenListHeader">
        <div class="remark-header" data-i18n="tokenHeaderRemark">推送环境</div>
        <div class="token-header" data-i18n="tokenHeaderToken">Token (必填)</div>
        <div class="action-header" data-i18n="tokenHeaderAction">操作</div>
      </div>
      <div id="tokenList"></div>
      <button class="btn add-btn" data-i18n="addTokenBtn">添加Token</button>
    </div>
  </div>

  <button class="btn save-btn" data-i18n="saveBtn">保存配置</button>
  
  <div id="status" class="status" data-i18n="saveSuccessMsg">配置已保存</div>

  <script src="i18n.js"></script>
  <script src="options.js"></script>
</body>
</html>